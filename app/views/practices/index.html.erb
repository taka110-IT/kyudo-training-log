<%= turbo_frame_tag 'targets_input' do %>
  <div>
    <% if @target_data.blank? %>
      <%= link_to t('views.index.target_input', year: Time.current.year, month: Time.current.month), new_target_path, data: { turbo_frame: "targets_modal" } %>
    <% end %>
  </div>
<% end %>

<div>
  <%= link_to t('views.new.title'), new_practice_path, data: { turbo_frame: "_top" } %>
</div>
<hr>

<%= turbo_frame_tag 'calendar' do %>
  <%= month_calendar(events: @calendar_displayed_practices) do |date, calendar_displayed_practices| %>
    <%= date.month %>/<%= date.day %>

    <% calendar_displayed_practices.each do |calendar_displayed_practice| %>
      <div>
        <% calendar_displayed_practice.shooting_count ||= 0 %>
        <%= link_to t('views.index.shooting_counts', count: calendar_displayed_practice.shooting_count),
                    practice_path(calendar_displayed_practice),
                    data: { turbo_frame: "practices_modal" } %>
      </div>
    <% end %>
  <% end %>
<% end %>

<hr>

<%= turbo_frame_tag 'practices-list' do %>
  <%= render 'tabs' %>

  <%= paginate @practices %>

  <div id="practices">
    <% @practices.each do |practice| %>
      <% practice.shooting_count ||= 0 %>
      <%= render practice %>
      <p>
        <%= link_to t('views.common.edit'), edit_practice_path(practice), data: { turbo_frame: "_top" } %>
      </p>
      <hr>
    <% end %>
  </div>

  <%= paginate @practices %>
<% end %>
